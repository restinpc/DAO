RewriteEngine on
AddDefaultCharset UTF-8
RewriteCond %{HTTP_HOST} ^www\.(.*)
RewriteRule ^(.*)$ https://dao-mansion.ru/$1 [R=301,L]
RewriteCond %{HTTP_HOST} ^nodes-tech\.ru(.*)
RewriteRule ^(.*)$ https://dao-mansion.ru/$1 [R=301,L]
RewriteCond %{HTTP:HTTPS} !=on [NC]
RewriteRule ^(.*)$ https://dao-mansion.ru/$1 [R=301,L]
php_value upload_max_filesize 512M
php_value post_max_size 512M
php_value max_file_uploads 30
php_value client_max_body_size 512M;
<ifModule mod_deflate.c>
    AddOutputFilterByType DEFLATE image/svg+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
    AddOutputFilterByType DEFLATE application/x-font
    AddOutputFilterByType DEFLATE application/x-font-opentype
    AddOutputFilterByType DEFLATE application/x-font-otf
    AddOutputFilterByType DEFLATE application/x-font-truetype
    AddOutputFilterByType DEFLATE application/x-font-ttf
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE font/opentype
    AddOutputFilterByType DEFLATE font/otf
    AddOutputFilterByType DEFLATE font/ttf
    AddOutputFilterByType DEFLATE image/x-icon
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/xml
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
    Header append Vary User-Agent
</ifmodule>
<ifModule mod_gzip.c>
    mod_gzip_on Yes
    mod_gzip_dechunk Yes
    mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
    mod_gzip_item_include mime ^application/x-javascript.*
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
    mod_gzip_item_exclude mime ^image/.*
    mod_gzip_item_include handler ^cgi-script$
</ifModule>
<ifModule mod_headers.c>
    ExpiresActive On
    FileETag None
    Header unset ETag
    Header unset Cache-Control
    Header unset Pragma
    Header unset Expires
    Header unset Last-Modified
    Header set Cache-Control "max-age=0, pre-check=0, no-cache, no-store, must-revalidate"
    Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
    <FilesMatch "\.(flv|gif|jpg|jpeg|png|ico|swf|js|css|pdf|ttf|svg|woff2|FLV|GIF|JPG|JPEG|PNG|ICO|SWF|JS|CSS|PDF|TTF|SVG|WOFF2)$">
        Header unset Cache-Control
        Header unset Expires
        Header set Cache-Control "max-age=604800"
    </FilesMatch>
    <FilesMatch "\.(obj|mtl|ply|dae|jpg|jpeg|gif|png|avi|mp4|webm|mss|json|OBJ|MTL|PLY|DAE|JPG|JPEG|GIF|PNG|AVI|MP4|WEBM|MSS|JSON)$">
        Header set Access-Control-Allow-Origin *
    </FilesMatch>
    <FilesMatch "^(cron|hook)\.php$">
        Header set Keep-Alive timeout=60
        php_value max_execution_time 60
    </FilesMatch>
</ifModule>
RewriteRule ^apps/(.*)$ apps/$1 [L]
RewriteRule ^favicon/(.*)$ favicon/$1 [L]
RewriteRule ^file/(.*)$ file/$1 [L]
RewriteRule ^font/(.*)$ font/$1 [L]
RewriteRule ^img/(.*)$ img/$1 [L]
RewriteRule ^res/(.*)$ res/$1 [L]
RewriteRule ^script/(.*)$ script/$1 [L]
RewriteRule ^template/(.*)$ template/$1 [L]
RewriteRule ^apple-touch-icon.png$ apple-touch-icon.png [L]
RewriteRule ^favicon.ico$ favicon.ico [L]
RewriteRule ^cron.php$ cron.php [L]
RewriteRule ^hook.php$ hook.php [L]
RewriteRule ^(.*)$ index.php?$1 [L]
